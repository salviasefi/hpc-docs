# Introduction
This guide provides a practical overview of setting up and running parallel computing R and Python scripts on the [Institute for CyberScience Advanced CyberInfrastructure (ICS-ACI)](https://ics.psu.edu/advanced-cyberinfrastructure/). ICS-ACI is the high-performance computing (HPC) at Penn State. For an introduction and further background on ICS-ACI, please see the following resources:

* [ICS-ACI Open Queue onboarding video](https://youtu.be/RQSrK1BH1-w) and accompanying [PowerPoint](https://psu.box.com/s/7o1bhgzxp01av9le578ub7ifb5mo0waw)
* [Guide to ICS-ACI for SCRiM Users](http://www.scrimhub.org/support/aci-scrim-cyberinfrastructure-guide.html)
* [ICS-ACI Quick Reference Document](https://ics.psu.edu/wp-content/uploads/2015/07/ACI-Documentation_Reference-Sheet.pdf)
* [ICS Training Videos](https://ics.psu.edu/what-we-do/education-and-training/ics-on-demand-videos/)

The guide consists of three sections:

* Overview of parallel computing and common parallel computing programming models
* Overview of the standard software required to submit and execute parallel computing applications on HPC systems like ICS-ACI
* Specific code examples for R and Python, including Portable Batch System (PBS) examples for submitting jobs


# What is parallel computing?
Parallel computing is the “simultaneous use of multiple compute resources to solve a computational problem” ([Barney 2017](https://computing.llnl.gov/tutorials/parallel_comp/#Whatis)). A workload is split into separate tasks, the tasks are executed concurrently on different computing resources, and then the results of the tasks are brought back together. There are many different parallel programming paradigms (see [Barney 2017](https://computing.llnl.gov/tutorials/parallel_comp/#Whatis) for a full review), but for practical purposes, it’s useful to think of two different models: (1) a shared memory multithreaded model; and (2) a distributed memory multiprocess model. This guide focuses on the latter, but we describe both models for context.

## Shared memory multithreaded model
Under the shared memory multithreaded model, a parent process has offshoots of concurrent execution called threads that all have access to the same shared memory. The threads can simultaneously run across multiple different processor cores, thus enabling parallelization. Because the threads share the same data structures, it is easy for them to communicate. However, this means proper [thread-safe code](https://en.wikipedia.org/wiki/Thread_safety) must be implemented to avoid [race conditions](https://stackoverflow.com/questions/34510/what-is-a-race-condition) and data inconsistencies. For instance, if multiple threads can change the value of a variable at the same time, [unexpected results can occur](https://stackoverflow.com/questions/34510/what-is-a-race-condition). Typically, shared memory multithreaded implementations can only be executed on a single computer. They can be run on HPC systems like ICS-ACI, but can only execute on a single node (i.e. computer) and cannot be used to execute a workload across multiple different nodes. In scientific computing, the most popular implementation of shared memory multithreading is the [OpenMP application programming interface](http://www.openmp.org/) for C/C++ and Fortran. Multithreading libraries are also available in [Python](https://docs.python.org/3.6/library/threading.html) and [R](https://cran.r-project.org/web/packages/Rdsm/index.html). It is important to note that while the Python threading library can be useful in [specific cases](https://www.toptal.com/python/beginners-guide-to-concurrency-and-parallelism-in-python), it is limited by the [Global Interpreter Lock](https://en.wikipedia.org/wiki/Global_interpreter_lock).

## Distributed memory multiprocess model
In the distributed memory multiprocess model, each parallel line of execution is a true independent process with its own memory space. Because the processes do not share memory, they coordinate and exchange data via messages. Although the message passing can occur added latency and decreased performance relative to a multithreaded model, the overhead required to ensure thread-safe code is eliminated. Workload processes can exist on the same node or across nodes, but multiprocessing libraries often only support execution on a single node (e.g. [Python multiprocessing package](https://docs.python.org/3.6/library/multiprocessing.html)). In the next section, we will discuss the [Message Passing Interface (MPI)](https://computing.llnl.gov/tutorials/mpi), the industry standard for executing a distributed memory multiprocess model workload across nodes on a HPC system.   

# Standard Software used on HPC Systems

## Message Passing Interface (MPI)
The [Message Passing Interface (MPI)](https://computing.llnl.gov/tutorials/mpi) is the industry standard for executing a distributed memory multiprocess model workload across nodes on a HPC system. MPI itself is not a software library, but an interface specification standard that defines what interface and features any MPI implementation must have. The two most popular MPI implementations are [Open MPI](https://www.open-mpi.org/) (not to be confused with [OpenMP](http://www.openmp.org/)) and [MPICH](https://www.mpich.org). Both are available on ICS-ACI. Although Open MPI and MPICH only provide native library interfaces for C and Fortran, MPI bindings are provided for Python by the [mpi4py](http://mpi4py.scipy.org/docs/) package and for R by the [Rmpi](https://cran.r-project.org/web/packages/Rmpi/index.html) package. It is important to note that while we focus on MPI within a distributed memory multiprocess model, it can also be used for [shared memory and hybrid shared-distributed memory parallel programming](https://software.intel.com/en-us/articles/an-introduction-to-mpi-3-shared-memory-programming).

## Portable Batch System (PBS)  
Because HPC systems like ICS-ACI serve many users, resource management software is required to effectively manage and utilize the computing resources. The [Portable Batch System (PBS)](https://en.wikipedia.org/wiki/Portable_Batch_System) is the most widely used HPC resource management software. ICS-ACI uses [TORQUE](http://www.adaptivecomputing.com/products/open-source/torque), a version of PBS, in combination with the [Moab workload manager](http://www.adaptivecomputing.com/products/hpc-products/moab-hpc-basic-edition/) to manage and utilize the cluster's computing resources. For the purposes of this tutorial, we will refer to the TORQUE/MOAB software suite simply as "PBS". Users submit requests for computational resources to PBS via job scripts that specify the computing resources required (e.g. number of processes and nodes, memory, compute time, etc.) and the command for the parallel processing application to be executed. The user requests are placed on a queue and PBS automatically allocates resources for the different jobs. When resources become available for a particular job, PBS gives the job exclusive use of the compute resources requested and then executes the job.

# Code Examples
Add links to MPI-based R, Python and PBS code examples...